model Product {
    id               String             @id @default(uuid())
    name             String
    shortDescription String?
    description      String?
    sku              String?            @unique
    stock            Int?
    price            Float
    discountPrice    Float?
    shippingWeight   String?
    handleTime       String?
    isfreeShipping   Boolean?
    packaging        String?
    unitSold         String?
    length           Float?
    width            Float?
    height           Float?
    productSize      String?
    productStatus    ProductStatus?     @default(Unpublished)
    imageUrl         String[] // Prisma supports arrays in PostgreSQL and MongoDB
    storeId          String
    locationId       String?
    purchaseOrderId  String?
    collectionId     String?
    warehouseId      String?
    hasVariation     Boolean?
    featuredBrands   FeaturedBrands[]
    cartItems        CartItem[]
    productVariation ProductVariation[]
    productCategory  ProductCategory[]
    inventoryItems   Inventory[] // Link to inventory records
    collection       ProductCollection? @relation(fields: [collectionId], references: [id], onDelete: Cascade)
    purchase         Purchase?          @relation(fields: [purchaseOrderId], references: [id], onDelete: Cascade)
    store            Organization       @relation(fields: [storeId], references: [id], onDelete: Cascade)
    createdAt        DateTime           @default(now())
    updatedAt        DateTime           @updatedAt
    warehouse        Warehouse?         @relation(fields: [warehouseId], references: [id], onDelete: Cascade)
    location         Location?          @relation(fields: [locationId], references: [id], onDelete: Cascade)

    @@map("product")
}

model ProductCategory {
    id          String       @id @default(uuid())
    name        String?
    description String?
    storeId     String
    product     Product[]
    store       Organization @relation(fields: [storeId], references: [id], onDelete: Cascade)
    createdAt   DateTime     @default(now())
    updatedAt   DateTime     @updatedAt

    @@map("productcategory")
}

model ProductCollection {
    id          String    @id @default(uuid())
    name        String
    description String?
    products    Product[]
    createdAt   DateTime  @default(now())
    updatedAt   DateTime  @updatedAt

    @@map("productcollection")
}

model ProductVariation {
    id            String                   @id @default(uuid())
    productId     String
    sku           String                   @unique
    price         Float
    cost          Float?
    discountPrice Float?
    stock         Int                      @default(0)
    imageUrl      String?
    product       Product                  @relation(fields: [productId], references: [id], onDelete: Cascade)
    options       ProductVariationOption[]
    createdAt     DateTime                 @default(now())
    updatedAt     DateTime                 @updatedAt

    @@map("productvariation")
}

model ProductVariant {
    id        String                @id @default(uuid())
    name      String
    values    ProductVariantValue[]
    createdAt DateTime              @default(now())
    updatedAt DateTime              @updatedAt

    @@map("productvariant")
}

model ProductVariantValue {
    id        String                   @id @default(uuid())
    variantId String
    value     String
    variant   ProductVariant           @relation(fields: [variantId], references: [id], onDelete: Cascade)
    options   ProductVariationOption[]
    createdAt DateTime                 @default(now())
    updatedAt DateTime                 @updatedAt

    @@map("productvariantvalue")
}

model ProductVariationOption {
    id          String              @id @default(uuid())
    variationId String
    valueId     String
    variation   ProductVariation    @relation(fields: [variationId], references: [id], onDelete: Cascade)
    value       ProductVariantValue @relation(fields: [valueId], references: [id], onDelete: Cascade)
    createdAt   DateTime            @default(now())
    updatedAt   DateTime            @updatedAt

    @@unique([variationId, valueId]) // prevent duplicate values in same SKU
    @@map("productvariantoption")
}

model FeaturedBrands {
    id        String   @id @default(uuid())
    name      String
    productId String
    product   Product  @relation(fields: [productId], references: [id])
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    @@map("featuredbrands")
}

enum ProductStatus {
    Unpublished
    Published
}
